<templateSet group="Groovy">
  <template name="jfrogPublish" value="//classpath &quot;org.jfrog.buildinfo:build-info-extractor-gradle:4.8.1&quot;&#10;//apply plugin: 'com.jfrog.artifactory'&#10;//apply plugin: 'maven-publish'&#10;&#10;def commonGroupId = '$groupId$'&#10;def currentVersion = '$currentVersion$'&#10;&#10;project('$projectName$') {&#10;    artifactoryPublish.dependsOn('build')&#10;    publishing {&#10;        publications {&#10;            aar(MavenPublication) {&#10;                groupId = commonGroupId&#10;                artifactId = project.getName()&#10;                version = currentVersion&#10;                // Tell maven to prepare the generated &quot;*.aar&quot; file for publishing&#10;                artifact(&quot;$buildDir/outputs/aar/${project.getName()}-release.aar&quot;)&#10;                pom.withXml {&#10;                    def dependenciesNode = asNode().appendNode('dependencies')&#10;                    configurations.api.allDependencies.each {&#10;                        def dependencyNode = dependenciesNode.appendNode('dependency')&#10;                        dependencyNode.appendNode('groupId', it.group)&#10;                        dependencyNode.appendNode('artifactId', it.name)&#10;                        dependencyNode.appendNode('version', it.version)&#10;                    }&#10;                }&#10;            }&#10;        }&#10;    }&#10;&#10;    artifactoryPublish {&#10;        publications(publishing.publications.aar)&#10;    }&#10;}&#10;&#10;&#10;/**&#10; * These is the section for common jFrog oss configuration&#10; *&#10; */&#10;artifactory {&#10;//    clientConfig.setIncludeEnvVars(true)&#10;//    clientConfig.info.addEnvironmentProperty('test.adding.dynVar',new Date().toString())&#10;//    clientConfig.timeout = 600&#10;    contextUrl = '$repoUrl$'&#10;    publish {&#10;        repository {&#10;            repoKey = '$repoKey$' // The Artifactory repository key to publish to&#10;            username = artifactory_username // The publisher user name&#10;            password = artifactory_password // The publisher password&#10;            // This is an optional section for configuring Ivy publication (when publishIvy = true).&#10;            ivy {&#10;                ivyLayout = '[organization]/[module]/ivy-[revision].xml'&#10;                artifactLayout = '[organization]/[module]/[revision]/[module]-[revision](-[classifier]).[ext]'&#10;                mavenCompatible = true //Convert any dots in an [organization] layout value to path separators, similar to Maven's groupId-to-path conversion. True if not specified&#10;            }&#10;        }&#10;        defaults {&#10;            // Reference to Gradle publications defined in the build script.&#10;            // This is how we tell the Artifactory Plugin which artifacts should be&#10;            // published to Artifactory.&#10;            publishArtifacts = true&#10;            publishBuildInfo = false&#10;            publishIvy = false&#10;            // Properties to be attached to the published artifacts.&#10;            properties = ['qa.level': 'basic', 'dev.team' : 'core']&#10;            publishPom = true // Publish generated POM files to Artifactory (true by default)&#10;        }&#10;    }&#10;}" description="jFrog Gradle code snippet to publish the library" toReformat="true" toShortenFQNames="true">
    <variable name="groupId" expression="" defaultValue="" alwaysStopAt="true" />
    <variable name="currentVersion" expression="" defaultValue="" alwaysStopAt="true" />
    <variable name="projectName" expression="" defaultValue="" alwaysStopAt="true" />
    <variable name="repoUrl" expression="" defaultValue="" alwaysStopAt="true" />
    <variable name="repoKey" expression="" defaultValue="" alwaysStopAt="true" />
    <context>
      <option name="GROOVY" value="true" />
    </context>
  </template>
</templateSet>